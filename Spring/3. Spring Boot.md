# 1) Cấu trúc dự án Spring Boot

1. Cấu trúc thư mục tiêu chuẩn của một app Spring Boot (Maven/Gradle) gồm những gì? Vai trò của `src/main/java`, `src/main/resources`, `src/test/java`?
2. Vì sao nên đặt lớp `Application` (chứa `main`) ở **root package**? Ảnh hưởng tới **component scanning** nếu đặt sai?
3. Tổ chức package theo **layer** (controller/service/repository) vs theo **feature/module**: trade-off?
4. ⚠️ Gài: Tạo nhiều module (multi-module) trong một hệ thống Boot — chọn module nào giữ **parent** và quản lý BOM thế nào?
5. Đóng gói **fat jar** là gì? Khác gì với war? Khi nào cần build war?
6. Spring Boot Maven/Gradle plugin làm những việc gì khi package/run/repackage?
7. Cách cấu hình profiles theo file (`application-dev.yml`) và theo môi trường (ENV/CLI) khác nhau thế nào?
8. Thêm tài nguyên tĩnh (static, templates, public) để phục vụ web: thư mục nào, độ ưu tiên?
9. ⚠️ Gài: Vì sao code chạy bằng IDE ổn nhưng khi chạy jar bị lỗi **resource path** (classpath vs file path)?
10. Case: bạn muốn tách **domain model** và **API** thành 2 module — giao tiếp giữa chúng và chia sẻ DTO như thế nào để tránh rò rỉ?

# 2) @SpringBootApplication & Auto-Configuration

1. `@SpringBootApplication` thực chất “gom” những annotation nào? Tác dụng của từng cái?
2. Auto-configuration hoạt động theo cơ chế **điều kiện** nào (`@ConditionalOnClass`, `@ConditionalOnMissingBean`, `@ConditionalOnProperty`, …)?
3. ⚠️ Gài: Khi cùng lúc có **bean do bạn khai báo** và **bean từ auto-config**, Spring chọn thế nào? Khi nào cần `@Primary` hoặc tự loại trừ?
4. Làm sao **vô hiệu hóa** một auto-configuration cụ thể (toàn cục hoặc theo profile)?
5. Debug auto-config: bạn dùng flag/log nào, hay endpoint/condition report nào để thấy **điều kiện khớp/không khớp**?
6. Khác biệt giữa **import selector**/`spring.factories` (cũ) và cơ chế **`AutoConfiguration.imports`** (mới) trong Boot? Ảnh hưởng khi viết starter tùy biến?
7. ⚠️ Gài: Vì sao thêm thư viện Jackson nhưng vẫn **không** serialize JSON? Kể ít nhất 3 khả năng.
8. Thứ tự áp dụng auto-config so với `@Configuration` của bạn: khi nào cấu hình tay **ghi đè** được auto-config?
9. Case: bạn muốn thay đổi **ObjectMapper** mặc định — 3 cách hợp lệ, ưu/nhược?
10. Case: cần tắt **web** auto-config (chạy CLI app) — làm sao cấu hình?

# 3) Cấu hình trong `application.properties` / `application.yml`

1. Khác nhau căn bản giữa `.properties` và `.yml`? Ưu/nhược, case dễ lỗi (indent, list, map)?
2. **Externalized Configuration**: các nguồn cấu hình được Spring Boot đọc theo thứ tự ưu tiên như thế nào (CLI args, ENV, system props, files, …)?
3. ⚠️ Gài: ENV `SPRING_DATASOURCE_URL` ánh xạ sang `spring.datasource.url` theo quy tắc gì? Khi có dấu chấm/ghạch dưới thì sao?
4. `application-{profile}.yml` load và **merge** với default ra sao? Có thể kích hoạt **nhiều profile** cùng lúc không?
5. Sử dụng placeholder `${...}` và default `${...:default}`: khi nào có hiệu lực, rủi ro vòng lặp?
6. Secret trong config: những anti-pattern thường gặp (đưa thẳng vào repo). Các lựa chọn thay thế an toàn hơn?
7. Chuyển đổi kiểu dữ liệu khi bind (duration, size, list, enum) diễn ra thế nào? Cần chú ý format nào?
8. ⚠️ Gài: Vì sao `application.yml` của bạn **không** được load khi chạy jar nhưng lại được load trong IDE?
9. Case: tách cấu hình theo **environment** (dev/staging/prod) và **region** (ap, eu). Bạn đặt file & active profile thế nào?
10. Case: cần override một vài key **tạm thời** khi chạy container: bạn chọn ENV hay CLI args? Vì sao?

# 4) Starter & Dependency Management

1. **Spring Boot Starter** là gì? Vì sao dùng starter thay vì tự liệt kê từng dependency?
2. `spring-boot-dependencies` (BOM) hoạt động thế nào? Tại sao không cần chỉ định version cho đa số starters?
3. ⚠️ Gài: Khi thêm một lib **ngoài BOM**, làm sao tránh **xung đột phiên bản** (dependency hell)?
4. Vai trò `spring-boot-starter-web`: gồm những module chính nào (web MVC, embedded server, JSON…)? Khi nào cần `spring-boot-starter-webflux`?
5. `spring-boot-starter-data-jpa`: cung cấp những gì? Nhắc đến JPA provider, transaction, EntityManager, query.
6. `spring-boot-starter-validation`: tích hợp Bean Validation (Jakarta Validation) ra sao? Phối hợp với Spring MVC như thế nào?
7. ⚠️ Gài: Tại sao thêm `spring-boot-starter-web` lại **kéo** Tomcat, nhưng bạn muốn dùng Jetty/Undertow thì làm gì?
8. Gradle vs Maven với Boot: khác nhau về **plugin** và **cách áp BOM** (platform/bom import).
9. Case: viết **custom starter** cho nội bộ công ty: cần những thành phần nào (auto-config, metadata, sample)?
10. Case: app cần cả MVC và WebFlux cho 2 use-case khác nhau — có nên trộn trong cùng project? Rủi ro?

# 5) Profiles & Configuration nâng cao

1. `@Profile` dùng trên class/method `@Bean` hoạt động ra sao? Cú pháp profile expression (AND/OR/NOT)?
2. Kích hoạt profile: qua file, ENV, CLI, programmatic — ưu/nhược từng cách?
3. ⚠️ Gài: `spring.profiles.active` vs `spring.profiles.include` khác nhau thế nào khi merge cấu hình?
4. `@ConfigurationProperties` là gì? So sánh với `@Value` về type-safety, testability, tổ chức cấu hình.
5. Cách đăng ký `@ConfigurationProperties`: `@ConfigurationPropertiesScan` vs `@EnableConfigurationProperties` vs khai báo `@Bean`. Khi nào cần cái nào?
6. **Constructor binding** cho `@ConfigurationProperties`: lợi ích về bất biến, yêu cầu gì trên class?
7. ⚠️ Gài: Vì sao field trong `@ConfigurationProperties` **không bind** được? Liệt kê ít nhất 3 nguyên nhân (prefix sai, không có setter/constructor, không được scan, …).
8. Validate cấu hình bằng `@Validated` + constraint trên `@ConfigurationProperties`: thông báo lỗi hiển thị như thế nào khi app khởi động?
9. Chuyển đổi cấu hình nhạy cảm theo profile (ví dụ datasource, logging, CORS): pattern “**fail fast**” với missing required props?
10. Case: cần structure hóa config phức tạp (map/list lồng nhau, enum, duration/size). Bạn định nghĩa POJO và test binding như thế nào?

# 6) Thực chiến ngắn (2–5 phút/câu)

1. Thiết lập 3 profile `dev/staging/prod` cho một service REST dùng JPA + Validation; mô tả file cấu hình, bật profile, và cách đảm bảo **không** dùng nhầm config prod.
2. Tùy biến JSON (naming strategy, date/time) **toàn cục** mà không đụng tới từng controller — nêu 2–3 cách khác nhau.
3. Viết một `MailAutoConfiguration` nội bộ: điều kiện, bean cung cấp, properties kèm prefix, và cách **override** bởi ứng dụng.
4. App cần chạy CLI (không web) để xử lý batch: bạn loại bỏ web auto-config, đọc config, và cấu hình profile như thế nào?
5. Sự cố khởi động: auto-config báo **mismatch điều kiện**. Trình tự bạn dùng để khoanh vùng nguyên nhân?
